---
title: 事件注册绑定
categories: DOM-BOM
tags: DOM-BOM
icon: code
---
# 事件注册绑定

- 事件就是用户和文档或浏览器窗口中发生的交互行为，比如点击按钮，鼠标移动，按下键盘上的某个键，关闭窗口，简单的理解：触发响应机制
- html和js之间的交互是通过事件实现的,事件是可以被js侦测到的行为

### 事件注册的三要素

- 事件源             事件绑定在哪一个元素上，那一个元素就是事件源

- 事件类型，如何触发，什么事件，比如：鼠标点击事件（click）鼠标经过事件  
  
- 事件处理函数             事件处理函数是一个异步任务

**注意：**传统注册事件的方式：利用on开头的事件，特点：注册事件的唯一性，同一个元素的同一个事件只能设置一个事件处理函数，最后注册的处理函数将会覆盖前面注册的处理函数

事假绑定/事件注册

## 传统事件绑定

传统注册事件的方式：利用on开头的事件    此方法没有兼容性问题

- 特点：


注册事件的唯一性，同一个元素的同一个事件只能设置一个事件处理函数，最后注册的处理函数将会覆盖前面注册的处理函数

因为传统方式的注册事件实际是赋值的行为

采用传统注册事件的方式注册事件时的绑定方式

- 我们可以开始标签中通过事件对应的事件属性设置一些js代码来绑定事件，这样当事件被触发时这些代码就会执行

格式： 事件源.on事件类型=事件处理函数

```js
var div01 = document.querySelector('#div01');
div01.onclick = function () {
     console.log('11');
}//每当我点击这个div时会触发事件函数在控制台输出11
```

特点：传统注册事件的方式，只能给一个元素的同一个事件类型绑定一个事件处理函数，后绑定的事件处理函数会覆盖前面绑定的事件处理函数

原因：传统注册事件的方式本质是给元素的属性赋值，后赋的值会覆盖之前赋的值

**事件处理函数内的this 指向事件源，即事件绑定在哪一个元素身上this就指向这个元素**

浏览器在加载一个html文件时，是按照自上向下的顺序加载的，读取到一行就执行一行，如果将script标签写在页面的上面（head内，body前）在代码执行时页面还没有加载，DOM对象也还没有加载，获取DOM对象时就会获取不到，解决这个问题的方法，这种方法会先加载js再加载html元素，会造成元素渲染的延迟

script标签写在前头时，给window对象绑定onload事件，onload事件会在整个页面加载完成之后再触发，该事件对应的响应函数将会在页面加载完成后执行

```js
window.onload=function(){
	页面要执行的js代码
}
```

尽量将script标签写在body结束标签的前面，页面元素的后面，这样会在页面元素加载完后再加载script

## addEventListener事件监听绑定事件

- 格式：eventTarget.addEventListener(type,listener[usercapture])

  eventTarget.addEventListener()方法将指定的监听器注册到eventTarget（目标对象）上，当该对象触发指定的事件时，就会执行事件处理函数

- 该方法接收三个参数

  - type ：事件类型**字符串**，比如 'click'  'mouseover'  不带on

  - listener：事件处理函数，事件触发时就会调用该监听函数

  - usecapture ：可选参数 布尔值 默认值为false 为执行冒泡事件流，再在事件冒泡阶段调用事件处理程序，true为执行捕获事件流，在事件捕获阶段调用事件处理程序

    

- 格式：事件源.addEventListener('事件类型',事件处理函数)

- 此方法可以给同一个元素的同一个事件添加多个监听器（事件处理程序），会按照书写顺序依次执行

### 删除事件（事件解绑）

传统方法的删除事件

因为是赋值行为，所以解绑时再次赋值为null即可

```js
div.onclick=function(){
    console.log('我被点击了')
}
//设置一个按钮，当点击按钮时将div的click事件解绑
btn.onclick=function(){
	div.onclick=null;
}
```

事件监听器的删除事件

格式：元素.removeEventLIstener('事件类型',要解绑的事件处理函数) 

注意：如果想要解绑事件监听器注册事件，在事件绑定的时候一定要把函数单独书写成一个具名函数，以函数名的形式绑定事件处理函数

```js
div.addEventListener('click',zx)   //此处为函数名 不需要加小括号。不要使用匿名函数 

let zx=function(){
  div.removeEventLIstener('click',zx)
}
```
